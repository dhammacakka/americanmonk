{{ define "main" }}

<article class="pa3 pa4-ns nested-copy-line-height">

  <header class="mb4 tc">
    <h1 class="f2 fw6 mb3">All Posts by Date</h1>
    <p class="mid-gray f5">Browse posts organized year by year.</p>
  </header>

  {{/* Get pages and sort by date descending */}}
  {{ $pages := where site.RegularPages "Section" "posts" }}
  {{ $sorted := $pages.ByDate.Reverse }}

  {{/* ===========================
       YEAR JUMP BUTTONS
     =========================== */}}

  <div class="tc mv4">
    {{ range $group := $sorted.GroupByDate "2006" }}
      <a href="#y{{ $group.Key }}"
         class="ba br-pill ph3 pv2 mh2 bg-light-gray link dark-gray hover-bg-near-white">
        {{ $group.Key }}
      </a>
    {{ end }}
  </div>

  {{/* ===========================
       YEAR SECTIONS
     =========================== */}}

  <div class="mw8 center">

    {{ range $group := $sorted.GroupByDate "2006" }}

      <h2 id="y{{ $group.Key }}"
          class="f2 fw6 mt5 mb3 tc bb b--light-gray pb2 recent-title">
        {{ $group.Key }}
      </h2>

      <section class="mt3 mb5">
        {{ range $group.Pages }}
          <div class="mb4">
            {{ partial "summary-no-inline-images.html" . }}
          </div>
        {{ end }}
      </section>

    {{ end }}

  </div>

</article>

{{ end }}
