{{ define "main" }}

<article class="pa3 pa4-ns mw8 center">

  <!-- Title -->
  <h1 class="f2 fw6 mb4 tc">Posts by Date</h1>

  {{/* 1. Get all posts in the "posts" section, newest first */}}
  {{ $posts := where .Site.RegularPages "Section" "posts" }}
  {{ $sorted := sort $posts "Date" "desc" }}

  {{/* 2. Group by year (e.g. "2025", "2024") */}}
  {{ $groups := $sorted.GroupByDate "2006" }}

  <!-- Year Jump Buttons -->
  <div class="mb4 tc">
    {{ range $groups }}
      <a href="#y{{ .Key }}"
         class="ba b--moon-gray bg-light-gray br2 dib f6 ph3 pv2 mh1 mb2 link">
        {{ .Key }}
      </a>
    {{ end }}
  </div>

  <!-- Year Sections -->
  {{ range $groups }}

    <!-- Year heading with anchor -->
    <h2 id="y{{ .Key }}"
        class="f3 fw6 mt5 mb3 tc">
      {{ .Key }}
    </h2>

    <!-- Posts for this year -->
    <section class="flex-ns flex-wrap">
      {{ range .Pages }}
        <div class="w-100 mb4 bg-white pa3 br3 shadow-4">
          {{ .Render "summary-with-image" }}
        </div>
      {{ end }}
    </section>

  {{ end }}

</article>

{{ end }}
